{
  "$schema": "https://developer.microsoft.com/json-schemas/rush/v5/command-line.schema.json",
  "commands": [
    {
      "commandKind": "bulk",
      "name": "test",
      "summary": "Run tests for all projects",
      "enableParallelism": true,
      "safeForSimultaneousRushProcesses": true
    },
    {
      "commandKind": "bulk",
      "name": "lint",
      "summary": "Run ESLint across all packages that define a lint script.",
      "enableParallelism": true,
      "ignoreDependencyOrder": true,
      "allowWarningsInSuccessfulBuild": false
    },
    {
      "commandKind": "global",
      "name": "publish-local",
      "summary": "Publish all @quojs/* packages to local Verdaccio (no Rush / Git)",
      "shellCommand": "bash common/scripts/publish-verdaccio.sh"
    },
    {
      "commandKind": "global",
      "name": "verdaccio-up",
      "summary": "Start local Verdaccio (Docker Compose)",
      "shellCommand": "docker compose -f ops/verdaccio/docker-compose.yml up -d"
    },
    {
      "commandKind": "global",
      "name": "verdaccio-down",
      "summary": "Stop local Verdaccio and remove volumes",
      "shellCommand": "docker compose -f ops/verdaccio/docker-compose.yml down -v"
    },
    {
      "commandKind": "global",
      "name": "verify-npm-access",
      "summary": "Preflight check for npm auth, org membership, scope mapping, and write access before publishing",
      "shellCommand": "bash common/scripts/verify-npm-access.sh"
    }
  ],
  "parameters": [
    {
      "parameterKind": "string",
      "longName": "--registry",
      "shortName": "-r",
      "argumentName": "REGISTRY",
      "description": "Verdaccio registry URL (default: http://localhost:4873)",
      "associatedCommands": [
        "publish-local"
      ]
    },
    {
      "parameterKind": "string",
      "longName": "--tag",
      "shortName": "-t",
      "argumentName": "TAG",
      "description": "Dist-tag to use for local publish (default: local)",
      "associatedCommands": [
        "publish-local"
      ]
    },
    {
      "parameterKind": "flag",
      "longName": "--skip-bump",
      "description": "Skip 'rush version' (publish current versions as-is)",
      "associatedCommands": [
        "publish-local"
      ]
    },
    {
      "parameterKind": "flag",
      "longName": "--skip-tests",
      "description": "Skip example matrix (install/build/test)",
      "associatedCommands": [
        "publish-local"
      ]
    },
    {
      "parameterKind": "string",
      "longName": "--scope",
      "argumentName": "SCOPE",
      "description": "npm scope (default: quojs) â€” omit the leading @",
      "associatedCommands": [
        "verify-npm-access"
      ]
    },
    {
      "parameterKind": "string",
      "longName": "--registry",
      "argumentName": "REGISTRY",
      "description": "Target registry to check (default: https://registry.npmjs.org/)",
      "associatedCommands": [
        "verify-npm-access"
      ]
    },
    {
      "parameterKind": "string",
      "longName": "--access",
      "argumentName": "ACCESS",
      "description": "Expected access level for first publish (default: public)",
      "associatedCommands": [
        "verify-npm-access"
      ]
    }
  ]
}